# File: post-job-steps.yml
##### Steps Template After All Builds #####

# Inputs: customDevice, lvVersion, pack (optional)
parameters:
  - name: customDevice
    type: string
  - name: lvVersion
    type: string
  - name: pack
    type: boolean
    default: false

steps:
###########  Archive  ###########
  - ${{ if eq( parameters.pack, true )}}:
    - powershell: rm -r "nipkg"; mkdir "nipkg"; cp -R "${{ parameters.customDevice }}\Built\*" "nipkg\data\documents\National Instruments\NI VeriStand 2020\Custom Devices\National Instruments"
      displayName: Generate nipkg File structure (INCOMPLETE) # run once per job
    - script: echo "this is incomplete"
      displayName: Pack nipkg (INCOMPLETE) # run once per job
  - powershell: cp -R -force "${{ parameters.customDevice }}\Built\*" "\\nirvana\temp\papower\LabVIEW ${{ parameters.lvVersion }}"
    displayName: Copying Built Files to \\nirvana Archive # run once per job