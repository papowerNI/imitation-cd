# File: build-vars.yaml

steps:
###########  Configure Variables  ###########
  # --- lvPath (32-bit or 64-bit LabVIEW directory) ---
  - ${{ if eq( parameters.bitness, '32' )}}:
    - powershell: Write-Host "##vso[task.setvariable variable=lvPath]C:\Program Files (x86)\National Instruments\LabVIEW ${{ parameters.lvVersion }}"
      displayName: Use 32-bit LabVIEW
  - ${{ if eq( parameters.bitness, '64' )}}:
    - powershell: Write-Host "##vso[task.setvariable variable=lvPath]C:\Program Files\National Instruments\LabVIEW ${{ parameters.lvVersion }}"
      displayName: Use 64-bit LabVIEW
  # --- lvConfigVersion (.NET Assembly Version) ---
  - ${{ if eq( parameters.lvVersion, '2020' )}}:
    - powershell: Write-Host "##vso[task.setvariable variable=lvConfigVersion]8.0.0.0"
      displayName: Use .NET Assembly Version 8.0.0.0
  - ${{ if eq( parameters.lvVersion, '2021' )}}:
    - powershell: Write-Host "##vso[task.setvariable variable=lvConfigVersion]9.0.0.0"
      displayName: Use .NET Assembly Version 9.0.0.0
  - ${{ if eq( parameters.lvVersion, '2023' )}}:
    - powershell: Write-Host "##vso[task.setvariable variable=lvConfigVersion]10.0.0.0"
      displayName: Use .NET Assembly Version 10.0.0.0
  # --- lvConfigFilePath, lvCLICall ---
  - powershell: | 
      Write-Host "##vso[task.setvariable variable=lvConfigFilePath]${{ parameters.customDevice }}\${{ parameters.projectLocation }}.config"
      Write-Host '##vso[task.setvariable variable=lvCLICall]LabVIEWCLI -PortNumber 3363 -LabVIEWPath "$(lvPath)\LabVIEW.exe" -AdditionalOperationDirectory "%cd%\${{ parameters.buildToolsRepo }}\lv\operations"'
    displayName: Store reused strings as variables